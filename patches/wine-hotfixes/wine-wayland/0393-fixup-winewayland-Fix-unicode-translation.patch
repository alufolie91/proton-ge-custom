From ee97d2f393ac6ee22fc094f949c06706e0b7a410 Mon Sep 17 00:00:00 2001
From: Etaash Mathamsetty
 <45927311+Etaash-mathamsetty@users.noreply.github.com>
Date: Wed, 19 Nov 2025 01:54:34 -0600
Subject: [PATCH 393/406] fixup! winewayland: Fix unicode translation.

---
 dlls/winewayland.drv/wayland_keyboard.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/dlls/winewayland.drv/wayland_keyboard.c b/dlls/winewayland.drv/wayland_keyboard.c
index 22dd45545a1..f6125a2fe56 100644
--- a/dlls/winewayland.drv/wayland_keyboard.c
+++ b/dlls/winewayland.drv/wayland_keyboard.c
@@ -1030,7 +1030,7 @@ static void keyboard_handle_key(void *data, struct wl_keyboard *wl_keyboard,
     input.ki.wScan = (scan & 0x300) ? scan + 0xdf00 : scan;
 
     pthread_mutex_lock(&keyboard->mutex);
-    input.ki.wVk = NtUserMapVirtualKeyEx(scan, MAPVK_VSC_TO_VK, keyboard_hkl) & 0xff;
+    input.ki.wVk = NtUserMapVirtualKeyEx(scan & 0xff, MAPVK_VSC_TO_VK, keyboard_hkl);
     pthread_mutex_unlock(&keyboard->mutex);
 
     if (scan & ~0xff) input.ki.dwFlags |= KEYEVENTF_EXTENDEDKEY;
-- 
2.51.1

