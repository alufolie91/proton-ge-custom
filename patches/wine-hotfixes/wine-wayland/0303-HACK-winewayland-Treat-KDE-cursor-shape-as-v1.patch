From 7a461c6e1d756a1b1d295668c5185651588dc6df Mon Sep 17 00:00:00 2001
From: Etaash Mathamsetty
 <45927311+Etaash-mathamsetty@users.noreply.github.com>
Date: Wed, 27 Aug 2025 16:14:23 -0500
Subject: [PATCH 303/441] HACK: winewayland: Treat KDE cursor shape as v1.

---
 dlls/winewayland.drv/wayland_pointer.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/dlls/winewayland.drv/wayland_pointer.c b/dlls/winewayland.drv/wayland_pointer.c
index 27b05a1eb09..e7e58a8bfc2 100644
--- a/dlls/winewayland.drv/wayland_pointer.c
+++ b/dlls/winewayland.drv/wayland_pointer.c
@@ -919,6 +919,8 @@ static BOOL wayland_pointer_set_cursor_shape(HCURSOR hcursor)
     if (!get_icon_info(hcursor, &info)) return FALSE;
     proto_version = wp_cursor_shape_manager_v1_get_version(
         process_wayland.wp_cursor_shape_manager_v1);
+    /* HACK: KDE doesn't support v2 shapes despite advertising v2 */
+    if (WAYLAND_HasWindowManager("KDE")) proto_version = 1;
     if (!(shape = cursor_shape_from_info(&info, proto_version))) return FALSE;
 
     if (!pointer->wp_cursor_shape_device_v1)
-- 
2.51.0

