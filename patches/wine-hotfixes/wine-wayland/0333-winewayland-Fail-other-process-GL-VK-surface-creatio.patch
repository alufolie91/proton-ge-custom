From 65599a810f580abfdf324a4703472ce028449c0f Mon Sep 17 00:00:00 2001
From: Etaash Mathamsetty
 <45927311+Etaash-mathamsetty@users.noreply.github.com>
Date: Sun, 17 Aug 2025 13:35:53 -0400
Subject: [PATCH 333/341] winewayland: Fail other process GL/VK surface
 creation.

---
 dlls/winewayland.drv/opengl.c | 1 +
 dlls/winewayland.drv/vulkan.c | 1 +
 2 files changed, 2 insertions(+)

diff --git a/dlls/winewayland.drv/opengl.c b/dlls/winewayland.drv/opengl.c
index cd5c20fa3fe..30bbedcc400 100644
--- a/dlls/winewayland.drv/opengl.c
+++ b/dlls/winewayland.drv/opengl.c
@@ -227,6 +227,7 @@ static struct wayland_gl_drawable *wayland_gl_drawable_create(HWND hwnd, int for
     if (tid && pid != GetCurrentProcessId())
     {
         ERR("Cross process rendering is not supported!\n");
+        return NULL;
     }
 
     gl->wl_egl_window = wl_egl_window_create(gl->client->wl_surface,
diff --git a/dlls/winewayland.drv/vulkan.c b/dlls/winewayland.drv/vulkan.c
index ade62d0df22..3c47e3e4810 100644
--- a/dlls/winewayland.drv/vulkan.c
+++ b/dlls/winewayland.drv/vulkan.c
@@ -85,6 +85,7 @@ static VkResult wayland_vulkan_surface_create(HWND hwnd, const struct vulkan_ins
     if (tid && pid != GetCurrentProcessId())
     {
         ERR("Cross process rendering is not supported!\n");
+        return VK_ERROR_OUT_OF_HOST_MEMORY;
     }
 
     create_info_host.sType = VK_STRUCTURE_TYPE_WAYLAND_SURFACE_CREATE_INFO_KHR;
-- 
2.50.1

