From 2018b18a9bbe188c573efc344fe8143d842f6a26 Mon Sep 17 00:00:00 2001
From: Vibhav Pant <vibhavp@gmail.com>
Date: Tue, 22 Oct 2024 11:43:37 +0530
Subject: [PATCH 228/336] cfgmgr32: Add stub for CM_Unregister_Notification.

---
 dlls/cfgmgr32/cfgmgr32.spec |  1 +
 dlls/cfgmgr32/main.c        | 10 ++++++++++
 include/cfgmgr32.h          |  1 +
 3 files changed, 12 insertions(+)

diff --git a/dlls/cfgmgr32/cfgmgr32.spec b/dlls/cfgmgr32/cfgmgr32.spec
index 5e48ba13b1b..383e091d399 100644
--- a/dlls/cfgmgr32/cfgmgr32.spec
+++ b/dlls/cfgmgr32/cfgmgr32.spec
@@ -187,3 +187,4 @@
 @ stub CM_Unregister_Device_InterfaceW
 @ stub CM_Unregister_Device_Interface_ExA
 @ stub CM_Unregister_Device_Interface_ExW
+@ stdcall CM_Unregister_Notification(ptr)
diff --git a/dlls/cfgmgr32/main.c b/dlls/cfgmgr32/main.c
index 7f4ee0679ae..4df093b0701 100644
--- a/dlls/cfgmgr32/main.c
+++ b/dlls/cfgmgr32/main.c
@@ -74,6 +74,16 @@ CONFIGRET WINAPI CM_Register_Notification( CM_NOTIFY_FILTER *filter, void *conte
     return CR_CALL_NOT_IMPLEMENTED;
 }
 
+/***********************************************************************
+ *           CM_Unregister_Notification (cfgmgr32.@)
+ */
+CONFIGRET WINAPI CM_Unregister_Notification( HCMNOTIFICATION notify )
+{
+    FIXME( "(%p) stub!\n", notify );
+
+    return CR_CALL_NOT_IMPLEMENTED;
+}
+
 /***********************************************************************
  *           CM_Get_Device_Interface_PropertyW (cfgmgr32.@)
  */
diff --git a/include/cfgmgr32.h b/include/cfgmgr32.h
index 7c8cab065ba..580d5d1cc26 100644
--- a/include/cfgmgr32.h
+++ b/include/cfgmgr32.h
@@ -343,6 +343,7 @@ CMAPI DWORD     WINAPI CM_MapCrToWin32Err(CONFIGRET,DWORD);
 CMAPI CONFIGRET WINAPI CM_Open_DevNode_Key(DEVINST dnDevInst, REGSAM access, ULONG ulHardwareProfile,
                                            REGDISPOSITION disposition, PHKEY phkDevice, ULONG ulFlags);
 CMAPI CONFIGRET WINAPI CM_Register_Notification(PCM_NOTIFY_FILTER,PVOID,PCM_NOTIFY_CALLBACK,PHCMNOTIFICATION);
+CMAPI CONFIGRET WINAPI CM_Unregister_Notification(HCMNOTIFICATION);
 CMAPI CONFIGRET WINAPI CM_Request_Device_EjectA(DEVINST dev, PPNP_VETO_TYPE type, LPSTR name, ULONG length, ULONG flags);
 CMAPI CONFIGRET WINAPI CM_Request_Device_EjectW(DEVINST dev, PPNP_VETO_TYPE type, LPWSTR name, ULONG length, ULONG flags);
 #define     CM_Request_Device_Eject WINELIB_NAME_AW(CM_Get_Device_ID_List_Ex)
-- 
2.51.0

