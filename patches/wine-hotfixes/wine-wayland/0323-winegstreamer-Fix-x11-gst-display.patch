From 989d72d36c58eb1ef1019fa71a38ab198c1fea83 Mon Sep 17 00:00:00 2001
From: Etaash Mathamsetty
 <45927311+Etaash-mathamsetty@users.noreply.github.com>
Date: Sun, 21 Sep 2025 13:40:13 -0500
Subject: [PATCH 323/346] winegstreamer: Fix x11 gst display.

---
 dlls/winegstreamer/unixlib.c | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

 diff --git a/dlls/winegstreamer/unixlib.c b/dlls/winegstreamer/unixlib.c
 index a7fb1b3003f..d5232cca794 100644
 --- a/dlls/winegstreamer/unixlib.c
 +++ b/dlls/winegstreamer/unixlib.c
 @@ -321,6 +321,11 @@ NTSTATUS wg_init_gstreamer(void *arg)
      GST_INFO("GStreamer library version %s; wine built with %d.%d.%d.",
              gst_version_string(), GST_VERSION_MAJOR, GST_VERSION_MINOR, GST_VERSION_MICRO);
  
 +    if ((e = getenv("GST_GL_DISPLAY")) && strlen(e) > 0)
 +        gl_display = gst_gl_display_new();
 +    else
 +        gl_display = gst_gl_display_new_with_type(GST_GL_DISPLAY_TYPE_EGL_SURFACELESS);
 +
      if (!(gl_display = gst_gl_display_new()))
          GST_ERROR("Failed to create OpenGL display");
      else
-- 
2.51.0

