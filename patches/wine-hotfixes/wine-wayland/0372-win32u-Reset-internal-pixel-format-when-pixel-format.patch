From 84ac519c3d071eacb5f2694c544e9d85570e4b12 Mon Sep 17 00:00:00 2001
From: Etaash Mathamsetty
 <45927311+Etaash-mathamsetty@users.noreply.github.com>
Date: Mon, 3 Nov 2025 20:16:10 -0600
Subject: [PATCH 372/409] win32u: Reset internal pixel format when pixel format
 is set.
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Co-Authored-By: RÃ©mi Bernon <4134719+rbernon@users.noreply.github.com>
---
 dlls/win32u/window.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/dlls/win32u/window.c b/dlls/win32u/window.c
index 1ed07de110c..994ff7a78ff 100644
--- a/dlls/win32u/window.c
+++ b/dlls/win32u/window.c
@@ -1492,7 +1492,10 @@ BOOL win32u_set_window_pixel_format( HWND hwnd, int format, BOOL internal )
     if (internal)
         win->internal_pixel_format = format;
     else
+    {
+        win->internal_pixel_format = 0;
         win->pixel_format = format;
+    }
     release_win_ptr( win );
 
     update_window_state( hwnd );
-- 
2.51.1

