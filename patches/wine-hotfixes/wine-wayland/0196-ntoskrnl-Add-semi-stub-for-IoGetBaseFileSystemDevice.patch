From d75cdd2230910b1e648a0da0e7dbdecd04f9999f Mon Sep 17 00:00:00 2001
From: Etaash Mathamsetty
 <45927311+Etaash-mathamsetty@users.noreply.github.com>
Date: Wed, 23 Jul 2025 15:36:53 -0400
Subject: [PATCH 196/346] ntoskrnl: Add semi-stub for
 IoGetBaseFileSystemDeviceObject.

---
 dlls/ntoskrnl.exe/ntoskrnl.c        | 9 +++++++++
 dlls/ntoskrnl.exe/ntoskrnl.exe.spec | 2 +-
 2 files changed, 10 insertions(+), 1 deletion(-)

diff --git a/dlls/ntoskrnl.exe/ntoskrnl.c b/dlls/ntoskrnl.exe/ntoskrnl.c
index 4e98ce4e041..7536f65a405 100644
--- a/dlls/ntoskrnl.exe/ntoskrnl.c
+++ b/dlls/ntoskrnl.exe/ntoskrnl.c
@@ -3390,6 +3390,15 @@ DEVICE_OBJECT* WINAPI IoGetAttachedDeviceReference( DEVICE_OBJECT *device )
     return result;
 }
 
+/***********************************************************************
+ *           IoGetBaseFileSystemDeviceObject   (NTOSKRNL.EXE.@)
+ */
+DEVICE_OBJECT *WINAPI IoGetBaseFileSystemDeviceObject( FILE_OBJECT *file )
+{
+    FIXME("%p -> %p semi-stub!\n", file, file->DeviceObject);
+    return file->DeviceObject;
+}
+
 
 /***********************************************************************
  *           PsCreateSystemThread   (NTOSKRNL.EXE.@)
diff --git a/dlls/ntoskrnl.exe/ntoskrnl.exe.spec b/dlls/ntoskrnl.exe/ntoskrnl.exe.spec
index 2f7dd939107..3b975bf45b2 100644
--- a/dlls/ntoskrnl.exe/ntoskrnl.exe.spec
+++ b/dlls/ntoskrnl.exe/ntoskrnl.exe.spec
@@ -401,7 +401,7 @@
 @ stdcall IoFreeWorkItem(ptr)
 @ stdcall IoGetAttachedDevice(ptr)
 @ stdcall IoGetAttachedDeviceReference(ptr)
-@ stub IoGetBaseFileSystemDeviceObject
+@ stdcall IoGetBaseFileSystemDeviceObject(ptr)
 @ stub IoGetBootDiskInformation
 @ stdcall IoGetConfigurationInformation()
 @ stdcall IoGetCurrentProcess()
-- 
2.51.0

