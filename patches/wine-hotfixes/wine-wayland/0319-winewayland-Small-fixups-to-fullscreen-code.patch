From 97e83ed8608c6a43d4d069db0752edc018c645ad Mon Sep 17 00:00:00 2001
From: Etaash Mathamsetty
 <45927311+Etaash-mathamsetty@users.noreply.github.com>
Date: Sun, 31 Aug 2025 01:42:06 -0500
Subject: [PATCH 319/336] winewayland: Small fixups to fullscreen code.

---
 dlls/winewayland.drv/wayland_surface.c | 5 -----
 dlls/winewayland.drv/window.c          | 1 -
 2 files changed, 6 deletions(-)

diff --git a/dlls/winewayland.drv/wayland_surface.c b/dlls/winewayland.drv/wayland_surface.c
index 42c0c77e069..1adc6e8dd01 100644
--- a/dlls/winewayland.drv/wayland_surface.c
+++ b/dlls/winewayland.drv/wayland_surface.c
@@ -694,13 +694,8 @@ static void wayland_surface_reconfigure_geometry(struct wayland_surface *surface
                 {
                     TRACE("Resetting fullscreen state: output %p, old output %p\n",
                         output, surface->requested_output);
-                    xdg_toplevel_unset_fullscreen(surface->xdg_toplevel);
-                    wl_display_flush(process_wayland.wl_display);
                     xdg_toplevel_set_fullscreen(surface->xdg_toplevel, output);
                     wl_display_flush(process_wayland.wl_display);
-                    /* In case we don't get enter event from compositor
-                    happens on sway for instance
-                    */
                     surface->requested_output = output;
                 }
                 pthread_mutex_unlock(&process_wayland.output_mutex);
diff --git a/dlls/winewayland.drv/window.c b/dlls/winewayland.drv/window.c
index 85a7d32b92d..def441f354f 100644
--- a/dlls/winewayland.drv/window.c
+++ b/dlls/winewayland.drv/window.c
@@ -289,7 +289,6 @@ static void wayland_surface_update_state_toplevel(struct wayland_surface *surfac
             !(surface->current.state & WAYLAND_SURFACE_CONFIG_STATE_MINIMIZED))
         {
             xdg_toplevel_set_minimized(surface->xdg_toplevel);
-            surface->requested_output = NULL;
         }
     }
     else
-- 
2.51.0

