From a425995542ca71bef2fa8be94cb6fe056c5860fd Mon Sep 17 00:00:00 2001
From: Etaash Mathamsetty
 <45927311+Etaash-mathamsetty@users.noreply.github.com>
Date: Sat, 16 Aug 2025 22:56:48 -0400
Subject: [PATCH 334/339] winewayland: Reconfigure surface on fractional scale
 event.

---
 dlls/winewayland.drv/wayland_surface.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/dlls/winewayland.drv/wayland_surface.c b/dlls/winewayland.drv/wayland_surface.c
index 42c0c77e069..bffc70b809f 100644
--- a/dlls/winewayland.drv/wayland_surface.c
+++ b/dlls/winewayland.drv/wayland_surface.c
@@ -144,7 +144,6 @@ static void wp_fractional_scale_handle_scale(void *user_data,
     struct wayland_win_data *data;
     struct wayland_surface *surface;
     HWND hwnd = user_data;
-    assert(hwnd);
 
     if ((data = wayland_win_data_get(hwnd)))
     {
@@ -154,6 +153,9 @@ static void wp_fractional_scale_handle_scale(void *user_data,
             surface->window.scale =
                 surface->window.fractional_scale * NtUserGetSystemDpiForProcess(0) / 96.0;
 
+            wayland_surface_reconfigure(surface);
+            wayland_surface_ensure_contents(surface);
+
             TRACE("Got scale %lf\n", surface->window.fractional_scale);
         }
 
-- 
2.50.1

