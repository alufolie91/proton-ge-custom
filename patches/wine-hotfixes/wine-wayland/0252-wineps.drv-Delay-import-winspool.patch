From 16cbf3e136a2cd42cf3acf9f8796666a5461f3af Mon Sep 17 00:00:00 2001
From: Alexandre Julliard <julliard@winehq.org>
Date: Wed, 2 Apr 2025 17:07:36 +0200
Subject: [PATCH 252/341] wineps.drv: Delay import winspool.

To avoid recursive initialization, since winspool.drv calls wineps.drv
from its DllMain, and after 55d2e55499fecbe57736eab80a5fc4a001e24040
winspool doesn't get preloaded during prefix creation.
---
 dlls/wineps.drv/Makefile.in | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/dlls/wineps.drv/Makefile.in b/dlls/wineps.drv/Makefile.in
index 02822403ce4..d75320ad012 100644
--- a/dlls/wineps.drv/Makefile.in
+++ b/dlls/wineps.drv/Makefile.in
@@ -1,6 +1,7 @@
 MODULE    = wineps.drv
 UNIXLIB   = wineps.so
-IMPORTS   = user32 gdi32 winspool advapi32 win32u
+IMPORTS   = user32 gdi32 advapi32 win32u
+DELAYIMPORTS = winspool
 UNIX_LIBS = -lwin32u -lm
 
 SOURCES = \
-- 
2.50.1

