From 3916fabc4e6e9cb4db21ea82ae188043b5442d6f Mon Sep 17 00:00:00 2001
From: Alexandre Julliard <julliard@winehq.org>
Date: Wed, 5 Feb 2025 11:26:25 +0100
Subject: [PATCH 354/409] winegcc: Always specify the output file name when
 there's no spec file.

Wine-Bug: https://bugs.winehq.org/show_bug.cgi?id=41342
---
 tools/winegcc/winegcc.c | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/tools/winegcc/winegcc.c b/tools/winegcc/winegcc.c
index dc7ef71ce42..2421bbe3fc8 100644
--- a/tools/winegcc/winegcc.c
+++ b/tools/winegcc/winegcc.c
@@ -1175,11 +1175,14 @@ static void build_spec_obj( struct options *opts, const char *spec_file, const c
         strarray_add(&spec_args, "-E");
         strarray_add(&spec_args, spec_file);
     }
-
-    if (!opts->shared)
+    else
     {
         strarray_add(&spec_args, "-F");
         strarray_add(&spec_args, output_name);
+    }
+
+    if (!opts->shared)
+    {
         strarray_add(&spec_args, "--subsystem");
         strarray_add(&spec_args, opts->gui_app ? "windows" : "console");
         if (opts->large_address_aware) strarray_add( &spec_args, "--large-address-aware" );
-- 
2.51.1

